<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Studio Insomnia </title>

  <!-- Perf: preconnect + Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Lato&display=swap" rel="stylesheet" />
  <!-- Favicon / Icône du site -->
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/favicon.png">
  <link rel="shortcut icon" href="/favicon.png">
  <meta name="theme-color" content="#121212">



  <!-- Perf: image hero -->
  <link rel="preload" as="image" href="Images/photo-studio2.jpeg" fetchpriority="high" />

  <!-- Spotify: perf -->
  <link rel="dns-prefetch" href="https://open.spotify.com" />
  <link rel="preconnect" href="https://open.spotify.com" crossorigin />
  <link rel="preconnect" href="https://i.scdn.co" crossorigin />

  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/tarifs.css" />
</head>
<body>
  <header role="banner">
    <img src="Images/logo.png" alt="Logo Studio Insomnia" class="logo" decoding="async" fetchpriority="high" />
    <nav id="nav-menu" aria-label="Navigation principale" aria-hidden="true">
      <a href="#apropos" class="active">À propos</a>
      <a href="#gallery">Galerie</a>
      <a href="#discographie">Discographie</a>
      <a href="#references">Références</a>
      <a href="#materiel">Matériel</a>
      <a href="#equipe">L'équipe</a>
      <a href="#tarifs">Tarifs</a>
      <a href="#contact">Contact</a>
    </nav>
    <button id="menu-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Ouvrir le menu">☰</button>
  </header>

  <!-- Héro -->
  <section id="hero" class="hero" aria-label="Présentation">
    <img
      src="Images/photo-studio2.jpeg"
      alt=""
      class="hero-bg"
      width="1920" height="800"
      loading="eager" fetchpriority="high" decoding="async"
    />
    <div class="hero-content">
      <h1><span style="font-size: 2em; display: block;">Insomnia</span></h1>
      <p style="font-size: 1.2em;">Studio d'enregistrement à Boulogne-Billancourt</p>
      <p>Rec, mixage, mastering, production</p>
      <a href="#contact" class="cta-btn">Prendre contact</a>
    </div>
  </section>

  <!-- 1) À propos -->
  <section id="apropos">
    <h2>À propos</h2>
    <p>
      Insomnia est un studio professionnel à Boulogne-Billancourt, spécialisé en enregistrement, mixage, mastering et composition.
      Fondé en 2023 par l’ingénieur du son Maherito, le studio allie confort, équipements haut de gamme et atmosphère intimiste pour des prises de son soignées dans un cadre moderne et inspirant.
    </p>
  </section>

  <!-- 2) Galerie -->
  <section id="gallery" aria-label="Galerie">
    <h2>Galerie</h2>
    <div class="gallery-grid">
      <figure><img src="Images/photo1.jpeg" alt="Vue du studio" loading="lazy" decoding="async" /></figure>
      <figure><img src="Images/photo2.jpeg" alt="Micro et cabine" loading="lazy" decoding="async" /></figure>
      <figure><img src="Images/photo3.jpeg" alt="Session d’enregistrement" loading="lazy" decoding="async" /></figure>
      <figure><img src="Images/photo4.jpeg" alt="Guitare du studio" loading="lazy" decoding="async" /></figure>
      <figure><img src="Images/canape.jpeg" alt="Coin lounge" loading="lazy" decoding="async" /></figure>
    </div>
  </section>

  <!-- 3) Discographie -->
  <section id="discographie" aria-label="Discographie">
    <h2>Discographie</h2>
    <div class="spotify-container">
      <iframe
        id="spotify-embed"
        title="Playlist Spotify"
        src="https://open.spotify.com/embed/playlist/36tkMon2P1CIW7WusHZX9Q"
        loading="lazy"
        allow="encrypted-media"
        frameborder="0"
        allowfullscreen
      ></iframe>
    </div>
  </section>

  <!-- 4) Références (Or/Platine/Diamant) -->
  <section id="references" aria-label="Références">
    <h2>Ils nous font confiance</h2>

    <div class="labels-grid" aria-label="Labels partenaires">
      <img src="Images/bluesky.webp" alt="Blue Sky" loading="lazy" decoding="async" />
      <img src="Images/sonymusic.png" alt="Sony Music" loading="lazy" decoding="async" />
      <img src="Images/universal.png" alt="Universal" loading="lazy" decoding="async" />
      <img src="Images/warner.png" alt="Warner" loading="lazy" decoding="async" />
      <img src="Images/rec118.webp" alt="Rec118" loading="lazy" decoding="async" />
      <img src="Images/ad.png" alt="ADA" loading="lazy" decoding="async" />
    </div>

    <div class="artists-grid" aria-label="Artistes">
      <figure><img src="Images/himra.jpg" alt="Himra" loading="lazy" decoding="async" /><figcaption>Himra</figcaption></figure>
      <figure><img src="Images/kerchak.webp" alt="Kerchak" loading="lazy" decoding="async" /><figcaption>Kerchak</figcaption></figure>
      <figure><img src="Images/dauzi.jpg" alt="Da Uzi" loading="lazy" decoding="async" /><figcaption>Da Uzi</figcaption></figure>
      <figure><img src="Images/genezio.jpg" alt="Genezio" loading="lazy" decoding="async" /><figcaption>Genezio</figcaption></figure>
      <figure><img src="Images/lamano.jpg" alt="La Mano" loading="lazy" decoding="async" /><figcaption>La Mano</figcaption></figure>
      <figure><img src="Images/leostay.avif" alt="Leo Stay Trill" loading="lazy" decoding="async" /><figcaption>Leo Stay Trill</figcaption></figure>
      <figure><img src="Images/mougli.jpg" alt="Mougli" loading="lazy" decoding="async" /><figcaption>Mougli</figcaption></figure>
    </div>

    <p>Maher a collaboré avec de nombreux artistes français et internationaux reconnus et le studio a reçu plusieurs certifications :</p>

    <div class="certifications">
      <div class="certif">
        <img src="Images/disque-or.png" alt="Disque d'or" class="certif-icon or" />
        <div class="certif-text">
          <strong>Or</strong>
          <p><img src="Images/saison2-kerchak.jpg" alt="" class="cover-small" /> Kerchak - Saison 2 (Album)</p>
          <p><img src="Images/guy2bezbar-ambition.jpg" alt="" class="cover-small" /> Guy2bezbar - Ambition (Album)</p>
        </div>
      </div>
      <div class="certif">
        <img src="Images/disque-platine.png" alt="Disque de platine" class="certif-icon" />
        <div class="certif-text">
          <strong>Platine</strong>
          <p><img src="Images/saison2-kerchak.jpg" alt="" class="cover-small" /> Kerchak - Saison 2 (Single)</p>
        </div>
      </div>
      <div class="certif">
        <img src="Images/disque-diamant.png" alt="Disque de diamant" class="certif-icon diamant" />
        <div class="certif-text">
          <strong>Diamant</strong>
          <p><img src="Images/jeune-et-riche-himra.jpg" alt="" class="cover-small" /> Himra - Jeune et riche (Album)</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 4.5) Matériel -->
  <section id="materiel" aria-label="Matériel du studio">
    <h2>Matériel</h2>

    <div class="gear-grid">
      <!-- Col 1 : Control Room / Régie -->
      <article class="gear-col">
        <figure class="gear-figure">
          <img src="Images/materiel-1.jpeg" alt="Régie / Control Room" loading="lazy" decoding="async" />
        </figure>
        <ul class="gear-items">
          <li>Surface de 20 m² – sécurisée et confortable</li>
          <li>Ascenseur et accès handicapé</li>
          <li>Capacité de 6 personnes</li>
          <li>Climatisation et purificateur d’air</li>
          <li>Machine à café, bouilloire, réfrigérateur</li>
          <li>Mac Studio M2 – Universal Audio Apollo X6</li>
          <li>Neve 1073, Distressor, Neve 8108 Vintage 1979</li>
          <li>Enceintes Neumann KH310, Avantone MixCubes</li>
          <li>Micro Shure SM57</li>
        </ul>
      </article>

      <!-- Col 2 : Cabine voix -->
      <article class="gear-col">
        <figure class="gear-figure">
          <img src="Images/materiel-2.jpeg" alt="Cabine voix" loading="lazy" decoding="async" />
        </figure>
        <ul class="gear-items">
          <li>Cabine de 10 m² isolée et traitée acoustiquement</li>
          <li>Micro Neumann U87</li>
          <li>Casque Sony MDR-7506</li>
          <li>Télévision de recopie d’écran</li>
          <li>Clavier MIDI connecté à la régie</li>
          <li>Ambiance lumineuse ajustable</li>
        </ul>
      </article>

      <!-- Col 3 : Instruments -->
      <article class="gear-col">
        <figure class="gear-figure">
          <img src="Images/materiel-3.jpeg" alt="Instruments du studio" loading="lazy" decoding="async" />
        </figure>
        <ul class="gear-items">
          <li>Claviers MIDI et contrôleurs</li>
          <li>Guitares Fender, Gibson, Cort, Gretsch</li>
          <li>Basse Marcus Miller</li>
          <li>Ampli guitare et pédales d’effet</li>
          <li>Accessoires studio : stands, câbles, DI box</li>
          <li>Instruments toujours entretenus et prêts à l’enregistrement</li>
        </ul>
      </article>
    </div>
  </section>

  <!-- 5) L'équipe -->
  <section id="equipe" aria-label="L'équipe">
    <h2>L'équipe</h2>
    <div class="team-grid">
      <div class="team-member">
        <img src="Images/maherito.jpg" alt="Maherito" class="zoomable" loading="lazy" decoding="async" />
        <h4>Maherito</h4>
        <p>Ingénieur du son &amp; Fondateur</p>
      </div>
      <div class="team-member">
        <img src="Images/nida.jpg" alt="Nida" class="zoomable" loading="lazy" decoding="async" />
        <h4>Nida</h4>
        <p>Compositeur</p>
      </div>
      <div class="team-member">
        <img src="Images/leJ.jpg" alt="le J" class="zoomable" loading="lazy" decoding="async" />
        <h4>le J</h4>
        <p>Compositeur &amp; Ingénieur du son</p>
      </div>
    </div>
  </section>

  <!-- 6) Tarifs -->
  <section id="tarifs" aria-label="Tarifs">
    <h2>Nos Tarifs Studio</h2>
    <div class="pricing">
      <div class="pricing-card">
        <h2>Enregistrement</h2>
        <p class="price">50€ HT <span>/ heure</span></p>
        <p class="price small">60€ TTC <span>/ heure</span></p>
        <small class="small-text">* ne concerne pas les sessions avec Maherito</small>
        <ul>
          <li>Minimum 2h de réservation</li>
          <li>Studio non fumeur</li>
          <li>Max 4 personnes (artiste inclus)</li>
          <li>Le retard n'est pas rattrapé</li>
        </ul>
      </div>

      <div class="pricing-card">
        <h2>Mixage</h2>
        <p class="price">350€ HT <span>par titre</span></p>
        <p class="price small">250€ HT <span>par titre si enregistré au studio</span></p>
      </div>

      <div class="pricing-card">
        <h2>Mastering</h2>
        <p class="price">50€ HT</p>
      </div>

      <div class="pricing-card contact-us">
        <h2>Production</h2>
        <p class="contact-text">Nous contacter pour un devis personnalisé</p>
        <a href="#contact" class="cta-btn">Contactez-nous</a>
      </div>
    </div>
  </section>

  <p class="disclaimer">Nous ne sommes pas responsables des sessions. Pensez à vous munir d’un disque dur pour récupérer vos fichiers.</p>

  <!-- 7) Contact -->
  <section id="contact" class="contact-info" aria-label="Contact">
    <h2>Contact</h2>

    <form id="contact-form" class="styled-form" action="https://formspree.io/f/xnnoplkl" method="POST" novalidate>
      <div class="form-group">
        <label for="name">Nom :</label>
        <input type="text" id="name" name="name" placeholder="Votre nom" required />
      </div>
      <div class="form-group">
        <label for="email">Email :</label>
        <input type="email" id="email" name="_replyto" placeholder="Votre email" required />
      </div>
      <div class="form-group">
        <label for="message">Message :</label>
        <textarea id="message" name="message" rows="5" placeholder="Votre message" required></textarea>
      </div>
      <button type="submit" class="styled-btn">Envoyer</button>
      <p id="form-message" role="status" aria-live="polite"></p>
    </form>

    <div class="contacts-buttons" aria-label="Moyens de contact rapides">
      <a href="tel:+33603818567" class="contact-btn">SMS / WhatsApp</a>
      <a href="mailto:maherito.engineer@gmail.com" class="contact-btn">Email</a>
    </div>
  </section>

  <footer>
    <div>
      <a href="https://www.instagram.com/insomnia.studioparis/" target="_blank" rel="noopener">
        <img src="Images/ig-icon.png" alt="Instagram" loading="lazy" decoding="async" />
      </a>
    </div>
    <small><a href="legal.html" style="color: white;">Mentions légales</a></small>
  </footer>

  <!-- JS : fonctionnalités complètes + correctifs -->
<script defer>
document.addEventListener("DOMContentLoaded", () => {

  /* =============================
     1. Scroll spy (menu actif)
  ============================= */
  window.addEventListener("scroll", () => {
    const sections = document.querySelectorAll("section[id]");
    const menuLinks = document.querySelectorAll("nav a");

    if (window.scrollY === 0) {
      menuLinks.forEach(link => {
        link.classList.toggle("active", link.getAttribute("href") === "#apropos");
      });
      return;
    }

    sections.forEach(section => {
      const id = section.getAttribute("id");
      const title = section.querySelector("h2");
      if (title) {
        const titleRect = title.getBoundingClientRect();
        if (titleRect.top >= 0 && titleRect.top < 100) {
          menuLinks.forEach(link => {
            link.classList.toggle("active", link.getAttribute("href") === `#${id}`);
          });
        }
      }
    });
  });

  /* =============================
     2. Zoom sur les images (.zoomable)
  ============================= */
  document.querySelectorAll(".zoomable").forEach(img => {
    img.addEventListener("click", () => {
      const overlay = document.createElement("div");
      overlay.style.cssText = `
        position:fixed;inset:0;background:rgba(0,0,0,.8);
        display:flex;align-items:center;justify-content:center;
        cursor:zoom-out;z-index:10000;
      `;
      const zoomImg = document.createElement("img");
      zoomImg.src = img.src;
      zoomImg.style.cssText = `
        max-width:90vw;max-height:90vh;border-radius:12px;
        box-shadow:0 8px 40px rgba(0,0,0,.9);
      `;
      overlay.appendChild(zoomImg);
      document.body.appendChild(overlay);
      overlay.addEventListener("click", () => overlay.remove());
    });
  });

  /* =============================
     3. Formulaire (Formspree AJAX)
  ============================= */
  const form = document.getElementById("contact-form");
  if (form) {
    form.addEventListener("submit", event => {
      event.preventDefault();
      const formData = new FormData(form);
      fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { "Accept": "application/json" }
      })
        .then(response => {
          const target = document.getElementById("form-message");
          if (response.ok) {
            target.textContent = "Merci pour votre message !";
            form.reset();
          } else {
            response.json().then(data => {
              target.textContent = data?.errors
                ? data.errors.map(e => e.message).join(", ")
                : "Erreur lors de l'envoi.";
            });
          }
        })
        .catch(() => {
          document.getElementById("form-message").textContent =
            "Erreur réseau, veuillez réessayer.";
        });
    });
  }

  /* =============================
     4. Menu mobile accessible
  ============================= */
  const menuToggle = document.getElementById("menu-toggle");
  const navMenu = document.getElementById("nav-menu");

  if (menuToggle && navMenu) {
    menuToggle.addEventListener("click", () => {
      const expanded = menuToggle.getAttribute("aria-expanded") === "true" || false;
      menuToggle.setAttribute("aria-expanded", !expanded);
      navMenu.setAttribute("aria-hidden", expanded);
    });
  }

  /* =============================
     5. Navigation fluide sans hash dans l’URL
  ============================= */
  const navLinks = document.querySelectorAll('nav a[href^="#"]');
  navLinks.forEach(link => {
    link.addEventListener("click", e => {
      const id = link.getAttribute("href").slice(1);
      const target = document.getElementById(id);
      if (!target) return;
      e.preventDefault();

      // Scroll fluide
      target.scrollIntoView({ behavior: "smooth", block: "start" });

      // Supprime le hash immédiatement
      if (history.replaceState) {
        history.replaceState(null, "", window.location.pathname + window.location.search);
      }

      // Accessibilité : focus temporaire
      target.setAttribute("tabindex", "-1");
      target.focus({ preventScroll: true });
      setTimeout(() => target.removeAttribute("tabindex"), 1000);

      // Ferme le menu mobile
      if (window.innerWidth <= 600 && menuToggle && navMenu) {
        menuToggle.setAttribute("aria-expanded", "false");
        navMenu.setAttribute("aria-hidden", "true");
      }
    });
  });

  // Nettoie aussi le hash si on arrive avec une ancre externe
  if (location.hash && history.replaceState) {
    history.replaceState(null, "", window.location.pathname + window.location.search);
  }

  /* =============================
     6. Spotify : robustesse du lecteur
  ============================= */
  (function(){
    const iframe = document.getElementById("spotify-embed");
    if (!iframe) return;

    const fallback = document.getElementById("spotify-fallback");
    const retryBtn = document.getElementById("spotify-retry");

    let loaded = false;
    iframe.addEventListener("load", () => {
      loaded = true;
      if (fallback) fallback.hidden = true;
    });

    // Affiche un fallback si ça ne charge pas après 6s
    setTimeout(() => {
      if (!loaded && fallback) fallback.hidden = false;
    }, 6000);

    // Bouton “réessayer”
    if (retryBtn) {
      retryBtn.addEventListener("click", () => {
        loaded = false;
        fallback.hidden = true;
        const src = iframe.getAttribute("src") || "";
        iframe.setAttribute("src", "about:blank");
        setTimeout(() => iframe.setAttribute("src", src), 50);
        setTimeout(() => {
          if (!loaded && fallback) fallback.hidden = false;
        }, 6000);
      });
    }
  })();

}); // <-- fin DOMContentLoaded
</script>
</body>
</html>
